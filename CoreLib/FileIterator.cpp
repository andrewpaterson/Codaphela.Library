#include "FileIterator.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CFileIteratorReturn::Init(void)
{
	meType = FIRT_Unknown;
	mszFullName.Init();
	mpsNode = NULL;
	miFileRank = -1;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CFileIteratorReturn::Init(EFileIteratorReturnType eType, CBaseFileNode* pcNode, int iFileRank)
{
	meType = eType;
	mszFullName.Init();
	pcNode->GetFullName(&mszFullName);
	mpsNode = pcNode;
	miFileRank = iFileRank;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CFileIteratorReturn::Kill(void)
{
	mszFullName.Kill();
	meType = FIRT_Unknown;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
EFileIteratorReturnType CFileIteratorReturn::GetType(void) { return meType; }
char* CFileIteratorReturn::GetFullName(void) { return mszFullName.Text(); }
CBaseFileNode* CFileIteratorReturn::GetNode(void) { return mpsNode; }
int CFileIteratorReturn::GetFileRank(void) { return miFileRank; }


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CFileIterator::Init(void)
{
	miPackFileIndex = -1;
	mbMoveOn = TRUE;
	mbFileSystem = FALSE;

	mcCurrent.Init();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CFileIterator::Kill(void)
{
	mcCurrent.Kill();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CFileIteratorReturn* CFileIterator::SetCurrent(EFileIteratorReturnType eType, CBaseFileNode* pcNode, int iFileRank)
{
	mcCurrent.Kill();
	mbHasCurrent = TRUE;
	mcCurrent.Init(eType, pcNode, iFileRank);
	return &mcCurrent;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CFileIteratorReturn* CFileIterator::GetCurrent(void)
{
	if (mbHasCurrent)
	{
		return &mcCurrent;
	}
	else
	{
		return NULL;
	}
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CFileIteratorReturn* CFileIterator::SetCurrent(void)
{
	mbHasCurrent = FALSE;
	return NULL;
}

