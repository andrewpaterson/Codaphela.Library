#include "JavaSyntaxVariableDeclaration.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CJavaSyntaxVariableDeclaration::Init(CJavaSyntaxTree* pcTree, CJavaSyntax* pcParent)
{
	CJavaSyntax::Init(pcTree, pcParent);

	mcModifiers.Init();
	mapcType.Init();
	mpcPrimitiveType = NULL;
	mpcName = NULL;
	mpcGeneric = NULL;
	miArrayDimension = 0;

	mpcInitialiser = NULL;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CJavaSyntaxVariableDeclaration::Kill(void)
{
	mpcInitialiser = NULL;
		
	mpcPrimitiveType = NULL;
	mpcName = NULL;
	mpcGeneric = NULL;
	miArrayDimension = 0;
	mapcType.Kill();
	mcModifiers.Kill();

	CJavaSyntaxStatement::Kill();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CJavaSyntaxVariableDeclaration::ReInit(void)
{
	mpcInitialiser = NULL;

	mpcGeneric = NULL;
	miArrayDimension = 0;
	mpcPrimitiveType = NULL;
	mpcName = NULL;
	mapcType.ReInit();
	mcModifiers.ReInit();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
char* CJavaSyntaxVariableDeclaration::GetType(void)
{
	return "Variable Declaration";
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CJavaSyntaxVariableDeclaration::Print(CChars* pszDest, int iDepth)
{
	CJavaSyntax::Print(pszDest, iDepth);
	pszDest->AppendNewLine();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
BOOL CJavaSyntaxVariableDeclaration::IsVariableDeclaration(void)
{
	return TRUE;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CJavaSyntaxVariableDeclaration::SetModifiers(CJavaModifiers cModifiers)
{
	mcModifiers = cModifiers;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CJavaSyntaxVariableDeclaration::SetPrimitiveType(CJavaTokenKeyword* pcPrimitiveType)
{
	mpcPrimitiveType = pcPrimitiveType;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CJavaSyntaxVariableDeclaration::AddIdentifierType(CJavaTokenIdentifier* pcIdentifier)
{
	mapcType.Add(pcIdentifier);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CJavaSyntaxVariableDeclaration::SetName(CJavaTokenIdentifier* pcName)
{
	mpcName = pcName;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CJavaSyntaxVariableDeclaration::SetInitialiser(CJavaSyntaxInitialiser* pcInitialiser)
{
	mpcInitialiser = pcInitialiser;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CJavaSyntaxVariableDeclaration::SetGeneric(CJavaSyntaxGeneric* pcGeneric)
{
	mpcGeneric = pcGeneric;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
BOOL CJavaSyntaxVariableDeclaration::IsPrimitiveType(void)
{
	return ((mpcPrimitiveType != NULL) && (mapcType.NumElements() == 0));
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
BOOL CJavaSyntaxVariableDeclaration::IsReferenceType(void)
{
	return (mapcType.NumElements() > 0) && (mpcPrimitiveType == NULL);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
BOOL CJavaSyntaxVariableDeclaration::IsGeneric(void)
{
	return IsReferenceType() && (mpcGeneric != NULL);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
int CJavaSyntaxVariableDeclaration::GetArrayDepth(void)
{
	return miArrayDimension;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
char* CJavaSyntaxVariableDeclaration::GetName(void)
{
	if (mpcName)
	{
		return mpcName->GetIdentifer();
	}
	return NULL;
}

