#include "InstructionFactory.h"


CInstructionFactory	gcInstructionFactory;
bool				gbInstructionFactoryInitialised = false;


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CInstructionFactory* CInstructionFactory::GetInstance(void)
{
	if (gbInstructionFactoryInitialised)
	{
		return &gcInstructionFactory;
	}
	else
	{
		gcInstructionFactory.Init();
		gbInstructionFactoryInitialised = true;
		return &gcInstructionFactory;
	}
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CInstructionFactory::Init(void)
{
	CreateInstructions();
	mpcReset = CreateReset();
	mpcIRQ = CreateIRQ();
	mpcNMI = CreateNMI();
	mpcAbort = CreateAbort();
	fetchNext = CreateFetchNext();
}
 

//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CInstruction* CInstructionFactory::GetInstruction(uint16 uiOpcode)
{
	return mapcInstructions[uiOpcode];
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CInstruction* CInstructionFactory::GetReset(void)
{
	return mpcReset;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CInstruction* CInstructionFactory::GetIRQ(void)
{
	return mpcIRQ;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CInstruction* CInstructionFactory::GetNMI(void)
{
	return mpcNMI;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CInstruction* CInstructionFactory::GetAbort(void)
{
	return mpcAbort;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CInstruction* CInstructionFactory::GetFetchNext(void)
{
	return mpcFetchNext;
}

