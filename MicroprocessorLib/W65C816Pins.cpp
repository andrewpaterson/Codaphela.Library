#include "W65C816Pins.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::Init(CMetaBus16* pcAddress, CMetaBus8* pcData, CMetaTrace* pcPHI2, CMetaTrace* pcRESB, CMetaTrace* pcRWB)
{
	mpcAddress = pcAddress;
	mpcData = pcData;
	mpcVPB = NULL;
	mpcRDY = NULL;
	mpcABORTB = NULL;
	mpcIRQB = NULL;
	mpcNMIB = NULL;
	mpcMLB = NULL;
	mpcVPA = NULL;
	mpcVDA = NULL;
	mpcRESB = pcRESB;
	mpcMX = NULL;
	mpcPHI2 = pcPHI2;
	mpcBE = NULL;
	mpcE = NULL;
	mpcRWB = pcRWB;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::SetImportantTraces(CMetaTrace* pcVPA, CMetaTrace* pcVDA, CMetaTrace* pcVPB)
{
	mpcVPB = pcVPB;
	mpcVPA = pcVPA;
	mpcVDA = pcVDA;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::SetInterruptTraces(CMetaTrace* pcABORTB, CMetaTrace* pcIRQB, CMetaTrace* pcNMIB)
{
	mpcABORTB = pcABORTB;
	mpcIRQB = pcIRQB;
	mpcNMIB = pcNMIB;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::Kill(void)
{
	mpcAddress = NULL;
	mpcData = NULL;
	mpcVPB = NULL;
	mpcRDY = NULL;
	mpcABORTB = NULL;
	mpcIRQB = NULL;
	mpcNMIB = NULL;
	mpcMLB = NULL;
	mpcVPA = NULL;
	mpcVDA = NULL;
	mpcRESB = NULL;
	mpcMX = NULL;
	mpcPHI2 = NULL;
	mpcBE = NULL;
	mpcE = NULL;
	mpcRWB = NULL;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::HalfCycle(void)
{
	bool	bLow;
	bool	bHigh;

	bLow = mpcPHI2->Get().IsLow();
	bHigh = mpcPHI2->Get().IsHigh();
	if (bLow || bHigh)
	{
		mpcPHI2->Set(!bHigh);
	}
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::WriteRWB(CTimeline* pcTimeline, bool bValue)
{
	mpcRWB->Set(bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::WriteMX(CTimeline* pcTimeline, bool bValue)
{
	SafeSetTrace(mpcMX, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::WriteVDA(CTimeline* pcTimeline, bool bValue)
{
	SafeSetTrace(mpcVDA, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::WriteVPA(CTimeline* pcTimeline, bool bValue)
{
	SafeSetTrace(mpcVPA, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::WriteMLB(CTimeline* pcTimeline, bool bValue)
{
	SafeSetTrace(mpcMLB, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::WriteVPB(CTimeline* pcTimeline, bool bValue)
{
	SafeSetTrace(mpcVPB, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::WriteE(CTimeline* pcTimeline, bool bValue)
{
	SafeSetTrace(mpcE, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::WriteRdy(CTimeline* pcTimeline, bool bValue)
{
	SafeSetTrace(mpcRDY, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::WriteAddress(CTimeline* pcTimeline, uint16 uiAddress)
{
	mpcAddress->Set(uiAddress);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::WriteData(CTimeline* pcTimeline, uint8 uiData)
{
	mpcData->Set(uiData);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
uint8 CW65C816Pins::ReadData(CTimeline* pcTimeline)
{
	return mpcData->Get();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
uint16 CW65C816Pins::ReadAddress(CTimeline* pcTimeline)
{
	return mpcAddress->Get();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::ReadRES(CTimeline* pcTimeline)
{
	return mpcRESB->Get();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::ReadPhi2(CTimeline* pcTimeline)
{
	return mpcPHI2->Get();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::ReadNMI(CTimeline* pcTimeline)
{
	SafeGetTrace(mpcNMIB);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::ReadIRQ(CTimeline* pcTimeline)
{
	SafeGetTrace(mpcIRQB);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::ReadAbort(CTimeline* pcTimeline)
{
	SafeGetTrace(mpcABORTB);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::ReadBE(CTimeline* pcTimeline)
{
	SafeGetTrace(mpcBE);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::SetRDY(bool bValue)
{
	SafeSetTrace(mpcRDY, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::SetABORTB(bool bValue)
{
	SafeSetTrace(mpcABORTB, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::SetIRQB(bool bValue)
{
	SafeSetTrace(mpcIRQB, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::SetNMIB(bool bValue)
{
	SafeSetTrace(mpcNMIB, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::SetRESB(bool bValue)
{
	mpcRESB->Set(bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::SetPHI2(bool bValue)
{
	mpcPHI2->Set(bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CW65C816Pins::SetBE(bool bValue)
{
	SafeSetTrace(mpcBE, bValue);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::GetVPB(void)
{
	SafeGetTrace(mpcVPB);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::GetRDY(void)
{
	SafeGetTrace(mpcRDY);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::GetMLB(void)
{
	SafeGetTrace(mpcMLB);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::GetVPA(void)
{
	SafeGetTrace(mpcVPA);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::GetVDA(void)
{
	SafeGetTrace(mpcVDA);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::GetMX(void)
{
	SafeGetTrace(mpcMX);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::GetE(void)
{
	SafeGetTrace(mpcE);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::GetRWB(void)
{
	return mpcRWB->Get();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
STraceValue CW65C816Pins::GetPHI2(void)
{
	return mpcPHI2->Get();
}

