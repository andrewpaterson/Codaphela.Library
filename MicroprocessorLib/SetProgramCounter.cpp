#include "W65C816.h"
#include "Address.h"
#include "SetProgramCounter.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CSetProgramCounter::Init(CAddressOffsetArray* papcAddressOffsets)
{
    COperation::Init();

    memcpy(&mapcAddressOffsets, papcAddressOffsets, sizeof(CAddressOffsetArray));
    free(papcAddressOffsets);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CSetProgramCounter::Kill(void)
{
    mapcAddressOffsets.Kill();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CSetProgramCounter::Execute(CW65C816* pcCPU)
{
    CAddress  cAddress;

    CalculateAddressWrappingFromAddressOffsets(&cAddress, pcCPU, &mapcAddressOffsets);
    pcCPU->SetProgramCounter(&cAddress);

}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
bool CSetProgramCounter::IsInitialSide(void)
{
    return false;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CSetProgramCounter::Print(CChars* psz)
{
	psz->Append("Set(PC)");
}

