#include "W65C816.h"
#include "W65C816State.h"
#include "DoneInstructionIf8Bit.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CDoneInstructionIf8Bit::Init(EWidthFromRegister eWidth)
{
    meWidth = eWidth;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CDoneInstructionIf8Bit::Execute(CW65C816* pcCPU)
{
    if (meWidth == WFR_M)
    {
        pcCPU->GetState()->DoneIfMemory8Bit();
    }
    else if (meWidth == WFR_XY)
    {
        pcCPU->GetState()->DoneIfIndex8Bit();
    }
    else
    {
        LOG_ERROR("Unknown Width.");
    }
	pcCPU->GetState()->DoneInstruction();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CDoneInstructionIf8Bit::Print(CChars* psz)
{
	psz->Append("DONE_If_8Bit_");
	psz->Append(CWidthFromRegister::GetName(meWidth));
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
size CDoneInstructionIf8Bit::GetDone8(void)
{
    return 1;
}
