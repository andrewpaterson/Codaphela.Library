#include "DistCalculator.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CDistCalculator::Init(void)
{
	mcParameters.Init();

	mcDistToRootCalculator.Init();
	mcDistToStackCalculator.Init();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CDistCalculator::Kill(void)
{
	mcDistToStackCalculator.Kill();
	mcDistToRootCalculator.Kill();

	mcParameters.Kill();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CArrayBaseObjectPtr* CDistCalculator::Calculate(CBaseObject* pcFromChanged)
{
	mcDistToRootCalculator.AddFromChanged(pcFromChanged);
	mcDistToRootCalculator.Calculate(&mcParameters);
	mcDistToStackCalculator.Calculate(&mcParameters);

	return mcParameters.GetCompletelyDetachedArray();
}

