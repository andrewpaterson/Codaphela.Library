#include "DistCalculator.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CDistCalculator::Init(void)
{
	mcEffectedFroms.Init();
	mcDetached.Init();
	mcDistToRootCalculator.Init();
	mcDistToStackCalculator.Init();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CDistCalculator::Kill(void)
{
	mcDistToStackCalculator.Kill();
	mcDistToRootCalculator.Kill();
	mcDetached.Kill();
	mcEffectedFroms.Kill();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CArrayBaseObjectPtr* CDistCalculator::Calculate(CBaseObject* pcFromChanged)
{
	mcDistToRootCalculator.AddFromChanged(pcFromChanged);
	mcDistToRootCalculator.Calculate(&mcEffectedFroms, &mcDetached);
	mcDistToStackCalculator.Calculate(&mcDetached);

	return mcDetached.GetCompletelyDetachedArray();
}

