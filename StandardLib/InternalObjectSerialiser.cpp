#include "ObjectSerialiser.h"
#include "InternalObjectSerialiser.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CInternalObjectSerialiser::Init(CDataConnection* pcDataConnection)
{
	mcWriter.Init(pcDataConnection, 0);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CInternalObjectSerialiser::Kill(void)
{
	mcWriter.Kill();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
BOOL CInternalObjectSerialiser::Write(CBaseObject* pcObject)
{
	CObjectSerialiser	cSerialiser;
	BOOL				bResult;
	CSerialisedObject*	pcSerialised;

	cSerialiser.Init(NULL);

	bResult = cSerialiser.Save(pcObject);
	ReturnOnFalse(bResult);

	pcSerialised = (CSerialisedObject*)cSerialiser.GetData();

	bResult = mcWriter.Write(pcSerialised);
	ReturnOnFalse(bResult);

	cSerialiser.Kill();

	return TRUE;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CInternalObjectSerialiser::AddDependent(CBaseObject* pcObject)
{
}

