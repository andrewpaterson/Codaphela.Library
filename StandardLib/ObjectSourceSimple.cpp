#include "Unknowns.h"
#include "ObjectSourceSimple.h"
#include "FileObjectReader.h"
#include "ObjectConverterNative.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CObjectSourceSimple::Init(CObjectConverter* pcConverter, CAbstractFile* pcFile, char* szFilename)
{
	CObjectSingleSource::Init(pcConverter, pcFile, szFilename);
	mpcReader = NULL;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CObjectSourceSimple::Kill(void)
{
	CObjectSingleSource::Kill();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
bool CObjectSourceSimple::IsSimple(void)
{
	return true;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
bool CObjectSourceSimple::IsNative(void)
{
	return true; 
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
bool CObjectSourceSimple::Contains(char* szFullName)
{
	return CObjectSingleSource::Contains(szFullName);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CBaseObject* CObjectSourceSimple::Convert(char* szFullName)
{
	CBaseObject*	pvObject;

	mpcReader = UMalloc(CFileObjectReader);
	mpcReader->Init(NULL);

	pvObject = mpcConverter->Convert(this, szFullName);
	mpcReader->Kill();

	return pvObject;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CExternalObjectReader* CObjectSourceSimple::GetReader(void)
{
	return mpcReader;
}

