#include "ObjectFileGeneral.h"
#include "DependentReadObject.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CDependentReadObject::Init(CObjectIdentifier* pcObjectPtr)
{
	mcType = pcObjectPtr->mcType;
	moi = pcObjectPtr->moi;
	mszObjectName.Init(pcObjectPtr->GetName());
	miFlags = 0;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CDependentReadObject::Kill(void)
{
	CObjectIdentifier::Kill();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
char* CDependentReadObject::GetName(void)
{
	return mszObjectName.Text();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
OIndex CDependentReadObject::GetOldIndex(void)
{
	return moi;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CDependentReadObject::SetRead(void)
{
	miFlags |= DEPENDENT_READ_OBJECT_FLAG_READ;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CDependentReadObject::SetExisting(void)
{
	miFlags |= DEPENDENT_READ_OBJECT_FLAG_EXISTED;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
bool CDependentReadObject::IsRead(void)
{
	return miFlags & DEPENDENT_READ_OBJECT_FLAG_READ;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
bool CDependentReadObject::ExistsInObjects(void)
{
	return miFlags & DEPENDENT_READ_OBJECT_FLAG_EXISTED;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
int CompareDependentReadObject(const void* ps1, const void* ps2)
{
	CDependentReadObject*	psObj1;
	CDependentReadObject*	psObj2;

	psObj1 = (CDependentReadObject*)ps1;
	psObj2 = (CDependentReadObject*)ps2;

	if (psObj1->moi < psObj2->moi)
	{
		return -1;
	}
	else if (psObj1->moi > psObj2->moi)
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

