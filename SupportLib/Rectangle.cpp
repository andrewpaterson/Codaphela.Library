/** ---------------- COPYRIGHT NOTICE, DISCLAIMER, and LICENSE ------------- **

Copyright (c) 2025 Andrew Paterson

This file is part of The Codaphela Project: Codaphela SupportLib

Codaphela SupportLib is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Codaphela SupportLib is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with Codaphela SupportLib.  If not, see <http://www.gnu.org/licenses/>.

libpng is Copyright Glenn Randers-Pehrson
zlib is Copyright Jean-loup Gailly and Mark Adler

** ------------------------------------------------------------------------ **/
#include "Rectangle.h"


#define HALF_TEXEL	(0.5f)


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::Init(void)
{
	miLeft = 0;
	miRight = 0;
	miTop = 0;
	miBottom = 0;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::Init(int32 iLeft, int32 iTop, int32 iRight, int32 iBottom)
{
	miLeft = iLeft;
	miTop = iTop;
	miRight = iRight;
	miBottom = iBottom;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::Init(int32 iWidth, int32 iHeight)
{
	miLeft = 0;
	miTop = 0;
	miRight = iWidth;
	miBottom = iHeight;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::Init(int64 iLeft, int64 iTop, int64 iRight, int64 iBottom)
{
	miLeft = (int32)iLeft;
	miTop = (int32)iTop;
	miRight = (int32)iRight;
	miBottom = (int32)iBottom;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::Init(SInt2 sTopLeft, SInt2 sBottomRight)
{
	miLeft = sTopLeft.x;
	miTop = sTopLeft.y;
	miRight = sBottomRight.x;
	miBottom = sBottomRight.y;
}

//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::Init(CRectangle* pcSource)
{
	Copy(pcSource);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::Kill(void)
{
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::Copy(CRectangle* pcSource)
{
	miLeft = pcSource->miLeft;
	miTop = pcSource->miTop;
	miRight = pcSource->miRight;
	miBottom = pcSource->miBottom;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
int32 CRectangle::GetWidth(void)
{
	return miRight - miLeft;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
int32 CRectangle::GetHeight(void)
{
	return miBottom - miTop;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
int32 CRectangle::GetArea(void)
{
	return GetWidth() * GetHeight();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::SetWidth(int32 iWidth)
{
	miRight = miLeft + iWidth;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::SetHeight(int32 iHeight)
{
	miBottom = miTop + iHeight;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::SetSize(int32 iWidth, int32 iHeight)
{
	SetWidth(iWidth);
	SetHeight(iHeight);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::SetPos(int32 x, int32 y)
{
	int32	iWidth;
	int32	iHeight;
	
	iWidth = GetWidth();
	iHeight = GetHeight();
	miLeft = x;
	miTop = y;
	miRight = miLeft + iWidth;
	miBottom = miTop + iHeight;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
int32 CRectangle::GetLeft(void)
{
	return miLeft;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
int32 CRectangle::GetTop(void)
{
	return miTop;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
int32 CRectangle::GetRight(void)
{
	return miRight;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
int32 CRectangle::GetBottom(void)
{
	return miBottom;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CRectangle::GrowToContain(int32 iXPos, int32 iYPos)
{
	if (iXPos < miLeft)
	{
		miLeft = iXPos;
	}
	if (iYPos < miTop)
	{
		miTop = iYPos;
	}

	if (iXPos >= miRight)
	{
		miRight = iXPos+1;
	}
	if (iYPos >= miBottom)
	{
		miBottom = iYPos+1;
	}
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
bool CRectangle::IsValid(void)
{
	return (miLeft <= miRight) && (miTop <= miBottom);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
bool CRectangle::IsIn(int32 x, int32 y)
{
	return (((x >= miLeft) && (x <= miRight)) && ((y >= miTop) && (y <= miBottom)));
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
bool CRectangle::IsIn(int32 iLeft, int32 iTop, int32 iRight, int32 iBottom)
{
	return (IsIn(iLeft, iTop) && IsIn(iRight, iBottom));
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
bool CRectangle::Equals(CRectangle* pcOther)
{
	if (pcOther)
	{
		if ((miTop == pcOther->miTop) &&
			(miBottom == pcOther->miBottom) &&
			(miLeft == pcOther->miLeft) &&
			(miRight == pcOther->miRight))
		{
			return true;
		}
	}
	return false;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
SFloat2	CRectangle::GetUVCoordinatesTopLeft(int32 iTextureXSize, int32 iTextureYSize)
{
	SFloat2	sTopLeft;

	sTopLeft.x = ((float)miLeft + HALF_TEXEL) / (float)iTextureXSize;
	sTopLeft.y = ((float)miTop + HALF_TEXEL) / (float)iTextureYSize;
	return sTopLeft;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
SFloat2	CRectangle::GetUVCoordinatesBottomRight(int32 iTextureXSize, int32 iTextureYSize)
{
	SFloat2 sBottomRight;

	sBottomRight.x = ((float)miRight + HALF_TEXEL) / (float)iTextureXSize;
	sBottomRight.y = ((float)miBottom + HALF_TEXEL) / (float)iTextureYSize;
	return sBottomRight;
}

