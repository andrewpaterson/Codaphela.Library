#include "DebugOutput.h"
#include "DebugOutputFile.h"


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
void CDebugOutputFile::Init(void)
{
	miPos = 0;
	mbOpen = FALSE;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
void CDebugOutputFile::Kill(void)
{
	miPos = 0;
	mbOpen = FALSE;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
BOOL CDebugOutputFile::Open(EFileMode eFileMode)
{
	mbOpen = TRUE;
	return TRUE;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
BOOL CDebugOutputFile::Close(void)
{
	mbOpen = FALSE;
	return TRUE;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
filePos CDebugOutputFile::Read(void* pvBuffer, filePos iSize, filePos iCount)
{
	return 0;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
BOOL CDebugOutputFile::Seek(filePos iOffset, EFileSeekOrigin iSeekOrigin)
{
	if (iSeekOrigin == EFSO_END)
	{
		if (iOffset == 0)
		{
			return TRUE;
		}
	}
	return FALSE;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
filePos CDebugOutputFile::Write(const void* pvBuffer, filePos iSize, filePos iCount)
{
	//Fix this up to ensure that the zero-terminated buffer is the same as size * count.
	EngineOutput((char*)pvBuffer);

	miPos += iSize * iCount;
	return iSize * iCount;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
filePos CDebugOutputFile::Tell(void)
{
	return miPos;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
BOOL CDebugOutputFile::IsOpen(void)
{
	return mbOpen;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
filePos CDebugOutputFile::Size(void)
{
	return miPos;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
BOOL CDebugOutputFile::Truncate(filePos iSize)
{
	return FALSE;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
BOOL CDebugOutputFile::Flush(void)
{
	return TRUE;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
BOOL CDebugOutputFile::Delete(void)
{
	return FALSE;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
char* CDebugOutputFile::GetFilename(void)
{
	return "DebugOutput";
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
CDebugOutputFile* DebugOutputFile(void)
{
	CDebugOutputFile*	pcDebugOutputFile;

	pcDebugOutputFile = NewMalloc<CDebugOutputFile>();
	pcDebugOutputFile->Init();
	pcDebugOutputFile->mbBasicFileMustFree = TRUE;
	return pcDebugOutputFile;

}

