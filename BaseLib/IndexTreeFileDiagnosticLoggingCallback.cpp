#include "IndexTreeFileDiagnosticLoggingCallback.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CIndexTreeFileDiagnosticLoggingCallback::Init(void)
{
	CIndexTreeFileDiagnosticCallback::Init();
	szLog.Init();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CIndexTreeFileDiagnosticLoggingCallback::Kill(void)
{
	szLog.Kill();
	CIndexTreeFileDiagnosticCallback::Kill();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CIndexTreeFileDiagnosticLoggingCallback::Put(void* pvKey, size iKeySize, void* pvData, size iDataSize)
{
	Log("Put", pvKey, iKeySize, pvData, iDataSize);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CIndexTreeFileDiagnosticLoggingCallback::Get(void* pvKey, size iKeySize, void* pvData, size iDataSize)
{
	Log("Get", pvKey, iKeySize, pvData, iDataSize);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CIndexTreeFileDiagnosticLoggingCallback::Remove(void* pvKey, size iKeySize, void* pvData, size iDataSize)
{
	Log("Remove", pvKey, iKeySize, pvData, iDataSize);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CIndexTreeFileDiagnosticLoggingCallback::Flush(void* pvKey, size iKeySize, void* pvData, size iDataSize)
{
	Log("Flush", pvKey, iKeySize, pvData, iDataSize);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CIndexTreeFileDiagnosticLoggingCallback::Evict(void* pvKey, size iKeySize, void* pvData, size iDataSize)
{
	Log("Evict", pvKey, iKeySize, pvData, iDataSize);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CIndexTreeFileDiagnosticLoggingCallback::Log(char* szOperation, void* pvKey, size iKeySize, void* pvData, size iDataSize)
{
	szLog.Append(szOperation);
	szLog.Append(":");
	szLog.Append(' ' , 7 - strlen(szOperation));
	szLog.AppendData2((char*)pvKey, iKeySize);
	szLog.Append(" [");
	szLog.Append(iDataSize);
	szLog.Append("]");
	szLog.AppendNewLine();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CIndexTreeFileDiagnosticLoggingCallback::Print(CChars* psz)
{
	psz->Append(szLog);
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CIndexTreeFileDiagnosticLoggingCallback::Dump(void)
{
	szLog.Dump();
}

