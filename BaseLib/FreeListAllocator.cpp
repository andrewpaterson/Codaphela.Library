#include "FreeListAllocator.h"


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
void CFreeListAllocator::Init(CFreeList* pcFreeList, char* szName)
{
	mpcFreeList = pcFreeList;
	mszName = szName;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
void* CFreeListAllocator::Malloc(size_t tSize)
{
	if (tSize > (size_t)mpcFreeList->GetElementSize())
	{
		return NULL;
	}
	
	return mpcFreeList->Add();
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
void CFreeListAllocator::Free(void* pv)
{
	mpcFreeList->Remove(pv);
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
void* CFreeListAllocator::Realloc(void* pv, size_t tSize)
{
	if (tSize > (size_t)mpcFreeList->GetElementSize())
	{
		mpcFreeList->Remove(pv);
		return NULL;
	}

	return pv;
}


//////////////////////////////////////////////////////////////////////////
//																		//
//																		//
//////////////////////////////////////////////////////////////////////////
char* CFreeListAllocator::GetName(void)
{
	return mszName;
}

