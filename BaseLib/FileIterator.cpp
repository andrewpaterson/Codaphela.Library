#include "FileIterator.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CFileIterator::Init(void)
{
	miPackFileIndex = -1;
	mbMoveOn = true;
	mbFileSystem = false;

	mcCurrent.Init();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CFileIterator::Kill(void)
{
	mcCurrent.Kill();
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CFileIteratorReturn* CFileIterator::SetCurrent(EFileIteratorReturnType eType, CBaseFileNode* pcNode, int iFileRank, char* szOffset)
{
	mcCurrent.Kill();
	mbHasCurrent = true;
	mcCurrent.Init(eType, pcNode, iFileRank);
	if (szOffset)
	{
		mcCurrent.InsertInName(0, "/");
		mcCurrent.InsertInName(0, szOffset);
	}
	return &mcCurrent;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CFileIteratorReturn* CFileIterator::GetCurrent(void)
{
	if (mbHasCurrent)
	{
		return &mcCurrent;
	}
	else
	{
		return NULL;
	}
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
CFileIteratorReturn* CFileIterator::SetCurrent(void)
{
	mbHasCurrent = false;
	return NULL;
}

